<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Fixed the type attribute in the link tag -->
    <link rel="stylesheet" type="text/css" href="serviceStudentPage.css">
    <link rel="icon" type="image/x-icon" href="images/stab_logo.webp">

    <title>Saints Service Sign Up</title>
</head>
<body>

<!-- <script type="module" src="../clubhub/script.js"></script>-->
 <script type="module" src="./serviceStudentPage.js"></script>
 <script type="module" src="./serviceSubmitHours.js"></script>
 <script type="module" src="./serviceAuth.js"></script>
 <script type="module">
    import {getTotalHours, getTotalSchoolServiceHours, calculateSchoolServiceHoursPercentage, calculateNonSchoolServiceHoursPercentage} from './serviceAuth.js';
    import {logout, getFirstNameFromAuth, getLastNameFromAuth, getHours, getSchoolGradRequirement, getCommunityGradRequirement} from './serviceStudentPage.js';
    window.getHours = getHours;
    window.calculateNonSchoolServiceHoursPercentage = calculateNonSchoolServiceHoursPercentage;
    window.calculateSchoolServiceHoursPercentage = calculateSchoolServiceHoursPercentage;
    window.getTotalHours = getTotalHours;
    window.getFirstNameFromAuth = getFirstNameFromAuth;
    window.getLastNameFromAuth = getLastNameFromAuth;
    window.getTotalSchoolServiceHours = getTotalSchoolServiceHours;
    window.logout = async () => {
        await logout();
    };

    // Populate user name after the page has loaded
    window.addEventListener('DOMContentLoaded', async (event) => {
        const firstName = await getFirstNameFromAuth();
        const lastName = await getLastNameFromAuth();
        const totalHours = await getTotalHours();
        const totalSchoolHours = await getTotalSchoolServiceHours();
        const writtenRequirementNonSchool = await getCommunityGradRequirement();
        const writtenRequirementSchool = await getSchoolGradRequirement();
        const schoolServiceHoursPercentage = await calculateSchoolServiceHoursPercentage();
        const nonSchoolServiceHoursPercentage = await calculateNonSchoolServiceHoursPercentage();
        // const neededSchoolHours = await getSchoolGradRequirement();
        // const neededCommunityHours = await getCommunityGradRequirement();
        document.getElementById("red-text-left-description").innerText = "total non-school service hours (" + nonSchoolServiceHoursPercentage + "%)";
        document.getElementById("red-text-right-description").innerText = "service to the school hours (" + schoolServiceHoursPercentage + "%)";
        document.getElementById("name").innerText = `${firstName} ${lastName}`;
        document.getElementById("totalHours").textContent = `${totalHours}`;
        document.getElementById("school-hours").textContent = `${totalSchoolHours}`;
        document.getElementById("writtenReqNonSchool").innerText = writtenRequirementNonSchool;
        document.getElementById("writtenReqSchool").innerText = writtenRequirementSchool;
        // document.getElementById("neededCommunityHrs").textContent = `${neededCommunityHours}`;
        // document.getElementById("neededSchoolHrs").textContent = `${neededSchoolHours}`;
    });
 </script>

     <!-- creates the header box and the title, inside the box -->
    <header class="header" id="header">
        <h1>Your Service Hours</h1>
    </header>
       <!-- Creates a bar below header box with nav buttons -->
   <div class="nav">
       <!-- <a class="button" href="#calendar">Calendar</a> -->
        <button class="button" id="servicelog" onClick = "location.replace('serviceStudentHistory.html');">Your Service Log</button>
        <button class="button" id="login-more-hours" onClick = "location.replace('serviceSubmitHours.html');">Log More Hours</button>
       <button class="button" id="viewServiceOpportunists" onClick = "location.replace('serviceViewAllServiceOpportunities.html');">View Service Opportunities</button>
<!--        <button class="button" id="login" onClick = "location.replace('serviceAccountSelection.html');">Login</button>-->
<!--        <button class="button" id="logout" onclick="logout();">Logout</button>-->
       <button class="button" id="logout" onclick="(async () => await logout())()">Logout</button>
        <button class="button" id="adminPageBtn" onclick="location.replace('serviceAdminPanel.html');" >Admin Page</button>
   </div>



    <!-- Calendar Section -->
    <section id="studentPage">
        <div class="studentPageTitle">
            <h1>Quick Overview</h1>
            <p id="name"></p>
            <br>
        </div>

        <!-- Calendar Display -->
        <div class="studentPage">
            <!-- Calendar Header -->
                <div class="studentPageHeader">
                <p id="student-Email"></p>

            </div>
            <div>
                <div class = "left-side">
                    <div class="red-box-left">
                    <div class="red-text-left">You have:</div>
                    <div id="totalHours" class="hours-display"></div>
                    <div id="red-text-left-description">
                       total non-school service hours
                    </div>
                  
                    <div id="writtenReqNonSchool"></div>
                    </div>
                </div>


                <div class = "right-side">
                    <div class="red-box-right">
                    <div class="red-text-right">You have:</div>
                    <div id="school-hours" class="hours-display"></div>
                    <div id="red-text-right-description">
                        service to the school hours
                    </div>
                   
                     <div id="writtenReqSchool"></div>
                    </div>
                </div>
                
<!--                <div class = "center-text-hours">-->
<!--                    <div class="neededCommunityHrs" id = "neededCommunityHrs"></div>-->
<!--                   <br>-->
<!--                   <div class="neededSchoolHrs" id = "neededSchoolHrs"></div>-->
<!--                </div>-->
<!--            </div>-->
            </div>
        </div>
    </section>



<!-- Footer -->
    <div class="footer">
        <div class="logos">
            <img class="logo" src="../../clubhub/images/stab_logo.webp" alt="logo">
        </div>
        <div class="devSplit">
            <div>Developer:</div>
            <div>Kate R. '26</div>
        </div>
        <button class="button ContactButton" onClick = "location.replace('../../clubhub/contactPage.html');">Feedback & Requests</button>
    </div>
</body>
</html>