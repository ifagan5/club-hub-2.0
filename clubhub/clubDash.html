<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Fixed the type attribute in the link tag -->
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="club.js"></script>
    <title>Club Dashboard</title>
    <script type="module">
        import {displayClubInfo, editVerification, saveFutureMeetingUpdates, hideFutureEditModal} from './clubinfo.js';
        window.displayClubInfo = displayClubInfo ;
        window.editVerification=editVerification;
        window.saveFutureMeetingUpdates=saveFutureMeetingUpdates;
        window.hideFutureEditModal=hideFutureEditModal;
        editVerification();
        displayClubInfo();
      </script>
</head>
<body>
    <!-- creates the header box and the title, inside the box -->
    <header class="header" id="header">
        <h1 class="clubName" id="clubName">Club Dashboard</h1>
    </header>

    <!-- Creates a bar bellow hearder box with nav buttons -->
    <div class="nav">
        <button class="button" onclick="location.replace('index.html');">Home</button>
        <!-- <button class="button">Calendar</button> -->
        <button class="button" onclick="location.replace('clubDirectory.html');">Club Directory</button>
        <button class="button" id="login"onclick="location.replace('choose.html');" >Log In</button>
        <button class="button" id="logout" >Logout</button>
        <button class="button" id="adminPageBtn"onclick="location.replace('god.html');" >Admin Page</button>
        
    </div>

    <div class="clubInfo">
        <div class="basicClubInfoBox">
        <div class="clubInfoBox bioQF" id="bio">About Us:
        </div>
        <div class="clubInfoBox bioQF" id = "quickFacts">Club information:</div>
        </div>
        <div class="clubInfoBox" id ="outlook">
            <h2 class="hTwoCDash">Next meetings and activities:</h2>
            <div class="loading-overlay" id="outlook-loading" aria-hidden="true">
                <span class="loading-spinner" role="status" aria-label="Loading upcoming meetings"></span>
            </div>
        </div>
        <div class="clubInfoBox" id ="meetingLog">
            <h2 class="hTwoCDash">Past meetings and activities:</h2>
            <div class="loading-overlay" id="meetingLog-loading" aria-hidden="true">
                <span class="loading-spinner" role="status" aria-label="Loading past meetings"></span>
            </div>
            <div id="meetingListScrollable"></div>
        </div>
    </div>

    <!-- Hidden Modal for Delete Confirmation -->
    <div id="deleteConfModal" class="confModal" style="display: none;">
        <div class="confModalContent">
        <p>Are you sure you want to delete this meeting?</p>
        <button id="confDelete" class="confbtn">Yes, Delete</button>
        <button id="confCancelDelete" class="confbtn" onclick="document.getElementById('deleteConfModal').style.display = 'none';">Cancel</button>
        </div>
    </div>
    <!-- END OF DELETE CONF MODAL!!!! -->

    <!-- Update existing meeting modal -->
    <div id="updateMeetModal" class="confModal" style="display: none;" data-club-id="" data-meeting-id="">
        <div class="confModalContent">
            <p class="meetingAddT">Update meeting information</p>

            <label for="edit-meeting-date">Meeting date:</label>
            <input type="date" id="edit-meeting-date">
            <label for="edit-meeting-time">Meeting time:</label>
            <input type="time" id="edit-meeting-time">

            <label for="edit-meeting-desc">Meeting description:</label>
            <textarea id="edit-meeting-desc"></textarea>

            <label for="edit-meeting-location">Meeting location:</label>
            <textarea id="edit-meeting-location"></textarea>

            <div class="edit-modal-toggle">
                <span>Is this a meeting or an event?</span>
                <label class="radio-container">
                    <input type="radio" name="edit-event" id="edit-event-yes" value="yes">
                    <span class="custom-radio"></span> Event
                </label>

                <label class="radio-container">
                    <input type="radio" name="edit-event" id="edit-event-no" value="no">
                    <span class="custom-radio"></span> Meeting
                </label>
            </div>

            <div class="edit-modal-actions">
                <button type="button" class="meetingEdit meetingEditPrimary" onclick="saveFutureMeetingUpdates()">Save changes</button>
                <button type="button" class="meetingEdit" onclick="hideFutureEditModal()">Cancel</button>
            </div>

        </div>
    </div>
    <!-- END OF UPDATE MEETING MODAL -->

    <!-- Create new event modal -->
    <div id="createMeetModal" class="confModal" style="display: none;" data-club-id="">
        <div class="confModalContent">
            <p class="meetingAddT">New meeting information</p>
    
            <label for="meeting-date">Meeting date:</label>
            <input type="date" id="meeting-date">
            <label for="meeting-time">Meeting time:</label>
            <input type="time" id="meeting-time">
    
            <label for="meeting-desc">Meeting description:</label>
            <textarea id="meeting-desc"></textarea>

            <label for="meeting-location">Meeting location:</label>
            <textarea id="meeting-location"></textarea>

            <label><input type="checkbox" id="leaders-only"> Leaders only</label>

            <label class="eventQuestion">Is this a meeting or an event?</label><br>

            <label class="radio-container">
                <input type="radio" name="event" id="yes" value="yes">
                <span class="custom-radio"></span> Event
            </label>

            <label class="radio-container">
                <input type="radio" name="event" id="no" value="no">
                <span class="custom-radio"></span> Meeting
            </label>

            <div class="loading-inline" id="recurring-loading" aria-hidden="true" style="display: none;">
                <span class="loading-spinner smaller" role="status" aria-label="Generating recurring meetings"></span>
            </div>

            <br><br>

            <label><input type="checkbox" id="recurring"> Recurring</label>

            <div id="recurring-options" style="display: none;">
                <label for="frequency">Frequency:</label>
                <select id="frequency">
                    <option value="weekly">Weekly</option>
                    <option value="biweekly">Biweekly</option>
                    <option value="monthly">Monthly</option>
                </select>

                <label>End condition:</label>
                <label><input type="radio" name="end-type" value="count" checked> Number of repetitions</label>
                <input type="number" id="repetitions" min="1" value="4">

                <label><input type="radio" name="end-type" value="date"> End date</label>
                <input type="date" id="end-date">
            </div>

            <br><br>

            <div class="recurring-preview" id="recurring-preview" style="display: none;">
                <h4>Meeting Schedule Preview:</h4>
                <div id="recurring-preview-list" style="max-height: 150px; overflow-y: auto; background: #f9f9f9; padding: 10px; border-radius: 4px; font-size: 14px;"></div>
            </div>

            <div>
                <button class="meetingEdit" onclick="saveMeeting()" id="createMeetButton">Create</button>
                <button class="meetingEdit" onclick="document.getElementById('createMeetModal').style.display = 'none';">Cancel</button>
            </div>
        </div>
    </div>
<!-- ENDDDDD OF MODAL -->

    <br> 
    <!-- creates a footer at the bottom of the page -->
    <div class="footer">
        <div class="logos">
            <img class="logo" src="images/stab_logo.webp" alt="logo">
        </div>
        <div class="devSplit">
            <div>Developer:</div>
            <div>Kate R. '26</div>
        </div>
        <button class="button ContactButton" onClick = "location.replace('contactPage.html');">Feedback & Requests</button>
    </div>
</body>
