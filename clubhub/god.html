<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Fixed the type attribute in the link tag -->
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="module" src="script.js"></script>
    <title>God</title>
    <script type="module">
        import { checkLogin, displayClubsInDanger, renderAdminClubInfo, logout, resetPoints, deleteClub, goToClub} from './script.js';
        window.checkLogin = checkLogin;
        window.resetPoints = resetPoints;
        window.displayClubsInDanger = displayClubsInDanger;
        window.renderAdminClubInfo = renderAdminClubInfo;
        window.logout = logout;
        window.deleteClub = deleteClub;
        window.goToClub = goToClub;
        renderAdminClubInfo();
        checkLogin();
        displayClubsInDanger();
    </script>
</head>
<body>
    <!-- creates the header box and the title, inside the box -->
    <header class="header" id="header">
        <h1> Admin Page</h1>
    </header>

    <!-- Creates a bar bellow hearder box with nav buttons -->
    <div class="nav">
        <button class="button" onClick="location.replace('index.html');">Home</button>
        <button class="button" onClick = "location.replace('clubDirectory.html');">Club Directory</button>
        <button class="button" id="logout" onclick="logout()" >Logout</button>
    </div>

    <div class="adminWrap">

        <!-- Modal for creating/editing announcements -->
        <div id="announcementModal" class="announcement-modal" style="display:none;">
            <div class="announcement-modal-content">
                <h3 id="announcementModalTitle">New Announcement</h3>
                <label>Message:</label>
                <textarea id="announcementMessage"></textarea>
                <label>Start Date/Time:</label>
                <input type="datetime-local" id="announcementStart">
                <label>End Date/Time:</label>
                <input type="datetime-local" id="announcementEnd">

            <div class="announcement-buttons">
                <button id="saveAnnouncementBtn">Save</button>
                <button id="cancelAnnouncementBtn">Cancel</button>
            </div>
        </div>
        </div>

        <!-- Modal for announcement log -->
        <div id="announcementLogModal" class="announcement-log" style="display:none;">
            <div class="announcement-modal-content">
                <h3 class="resetPointsText">Announcement Log</h3>
                <div id="announcementLogList"></div>
                <div class="announcement-log-footer">
                    <button id="clearAnnouncementLogBtn">Clear Log</button>
                    <button id="closeAnnouncementLogBtn">Close</button>
                </div>
            </div>
        </div>


        <div class="clubsInDangerWrapper">
            <div class="resetPointsDiv announcement-controls">
            <div class="resetPointsText">Site-Wide Announcements</div>
            <button id="createAnnouncementBtn" class="resetPointsButton"><span>Create Site-Wide Announcement</span></button>
            <button id="announcementLogBtn" class="resetPointsButton"><span>Announcement Log</span></button>
        </div>
            <div class="clubsInDanger" id="clubsInDangerDiv">
                <div class="clubsInDangerTitle">Clubs in Danger!</div>
                <div class="clubsInDangerButtons" id="clubsInDangerButtonsContainer">
                    <!-- JS will insert buttons here -->
                </div>
            </div>
            <div class="resetPointsDiv">
                <div class="resetPointsText">Reset Points for All Clubs</div>
                <button class="resetPointsButton" onclick="resetPoints()"><span>Reset Points</span></button>
            </div>
        </div>

        <div class="adminLineTwo"></div>

        <div class="mainAdminBox">
            <div class="search-container">
                <div id="searchUsers" class="instant-search">
                <div class="instant-search__input-container">
                    <input class="instant-search__input" type="text" spellcheck="false" placeholder="Search For Club Here"/>
                    <img class="instant-search__icon" src="images/search-icon.png" alt="search"/>
                </div>
                <!-- results generate here -->
                </div>
            </div>

            <div class="adminClubInfoWrapper" id="adminClubInfoWrapper">
                <div class="clubnameWrapper">
                    <div class="adminLine"></div>
                    <div class="adminClubName" id="adminClubName">Club Name</div>
                    <div class="adminLine"></div>
                </div>
                <div class="adminClubInfo">
                    <div class="adminInfoSplit">
                        <div class="adminaboutClub" id="adminaboutClub" data-title="Club Info">Please search for a club or select one from the left to view details.</div>
                        <div class="adminNextMeeting" id="adminNextMeeting" data-title="Next Meeting"></div>
                    </div>
                    <div class="adminInfoSplit">
                        <div class="adminInDangerDiv" id="adminInDangerDiv" data-title="Status"></div>
                        <div class="adminPastMeetings" id="adminPastMeetings" data-title="Past Meetings"></div>
                    </div>
                </div>
            </div>
            <div class="DCB-GCB-Wrapper">
                <button class="deleteClubButton" onclick="deleteClub()">
                    <span class="buttonText">Delete Club</span>
                    <span class="spark spark1"></span>
                    <span class="spark spark2"></span>
                    <span class="spark spark3"></span>
                    <span class="spark spark4"></span>
                    <span class="spark spark5"></span>
                    <span class="spark spark6"></span>
                    <span class="spark spark7"></span>
                    <span class="spark spark8"></span>
                    <span class="spark spark9"></span>
                    <span class="spark spark10"></span>
                    <span class="spark spark11"></span>
                    <span class="spark spark12"></span>
                    <span class="spark spark13"></span>
                    <span class="spark spark14"></span>
                    <span class="spark spark15"></span>
                </button>
                <button class="adminGoToClubButton" onclick="goToClub()"><span>Go to Club's Page</span></button>
            </div>
        </div>
    </div>

    <div class="adminLineThree"></div>
    <br>
    <!-- creates a footer at the bottom of the page -->
    <div class="footer">
        <div class="logos">
            <img class="logo" src="images/stab_logo.webp" alt="logo">
        </div>
        <div class="devSplit">
            <div>Developer:</div>
            <div>Kate R. '26</div>
        </div>
        <button class="button ContactButton" onClick = "location.replace('contactPage.html');">Feedback & Requests</button>
    </div>
</body>
